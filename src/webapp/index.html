<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Ultra Explosion Hearts</title>

<style>
    body {
        margin: 0;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
        background: #0e1118;
        font-family: Inter, sans-serif;
        color: white;
        overflow: hidden;
    }

    .wrapper {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 40px;
    }

    /* LIVES --------------------------------------------------------- */
    .lives {
        display: flex;
        gap: 10px;
        position: relative;
    }

    .heart {
        font-size: 65px;
        filter: drop-shadow(0 0 10px rgba(255,70,90,0.6));
        position: relative;
        z-index: 2;
    }

    /* SHOCKWAVE RING */
    @keyframes shockwave {
        0%   { transform: scale(0.2); opacity: 0.9; }
        70%  { opacity: 0.5; }
        100% { transform: scale(3.2); opacity: 0; }
    }

    .shockwave {
        position: absolute;
        width: 80px;
        height: 80px;
        border-radius: 50%;
        border: 4px solid rgba(255,90,110,0.9);
        animation: shockwave 0.55s ease-out forwards;
        pointer-events: none;
    }

    /* MIDDLE FLASH */
    @keyframes flash {
        0%   { opacity: 0.85; transform: scale(1); }
        100% { opacity: 0; transform: scale(4); }
    }
    .flash-burst {
        position: absolute;
        width: 50px;
        height: 50px;
        background: radial-gradient(circle, white, rgba(255,255,255,0));
        border-radius: 50%;
        animation: flash 0.35s ease-out forwards;
        pointer-events: none;
        filter: blur(4px);
    }

    /* HEART SHARD */
    .shard {
        position: absolute;
        width: 22px;
        height: 22px;
        opacity: 0.9;
        pointer-events: none;
        background: radial-gradient(circle, #ff5a6e, #cc2b40);
        border-radius: 4px;
        transform-origin: center;
        animation: shardFlight 0.75s cubic-bezier(.16,.84,.57,1) forwards;
    }

    @keyframes shardFlight {
        0%   { transform: translate(0,0) rotate(0deg) scale(1); opacity: 1; }
        100% { transform: translate(var(--dx), var(--dy)) rotate(260deg) scale(0.3); opacity: 0; }
    }

    /* PARTICLES (SPARKS) */
    .spark {
        position: absolute;
        width: 6px;
        height: 6px;
        background: rgba(255,200,80,1);
        border-radius: 50%;
        filter: drop-shadow(0 0 4px rgba(255,200,80,0.8));
        pointer-events: none;
        animation: sparkFly 0.6s ease-out forwards;
    }

    @keyframes sparkFly {
        0%   { transform: translate(0,0) scale(1); opacity: 1; }
        100% { transform: translate(var(--dx), var(--dy)) scale(0); opacity: 0; }
    }

    /* SCREEN SHAKE */
    @keyframes shake {
        0% { transform: translate(0,0); }
        25% { transform: translate(-6px,5px); }
        50% { transform: translate(6px,-5px); }
        75% { transform: translate(-4px,4px); }
        100% { transform: translate(0,0); }
    }

    .shake {
        animation: shake 0.28s ease;
    }

    /* BUTTONS -------------------------------------------------------- */
    .container {
        display: flex;
        gap: 40px;
    }

    .circle {
        width: 85px;
        height: 85px;
        border-radius: 50%;
        cursor: pointer;
        opacity: 0.75;
        transition: transform 0.25s ease, opacity 0.25s ease;
        box-shadow: 0 6px 14px rgba(0,0,0,0.28);
    }

    .circle:hover {
        opacity: 0.9;
        transform: scale(1.08);
    }

    @keyframes clickFlash {
        0%   { transform: scale(1); box-shadow: 0 0 0 currentColor; }
        45%  { transform: scale(1.25); box-shadow: 0 0 48px currentColor; }
        100% { transform: scale(1); box-shadow: none; }
    }

    .flash {
        animation: clickFlash 0.35s ease-out;
    }

    .red   { background: #ff4b5c; }
    .green { background: #4ade80; }
    .blue  { background: #60a5fa; }

</style>
</head>

<body>
<div class="wrapper">

    <!-- Lives -->
    <div class="lives" id="lives"></div>

    <div class="container">
        <div class="circle red"></div>
        <div class="circle green"></div>
        <div class="circle blue"></div>
    </div>
</div>

<script>
    let lives = 3;
    const livesBox = document.getElementById("lives");

    function renderHearts() {
        livesBox.innerHTML = "";
        for (let i = 0; i < lives; i++) {
            const h = document.createElement("div");
            h.classList.add("heart");
            h.textContent = "❤️";
            livesBox.appendChild(h);
        }
    }

    /* ---------------- EXPLOSION EFFECT ---------------- */
    function explodeHeart() {
        const hearts = livesBox.querySelectorAll(".heart");
        if (!hearts.length) return;

        const heart = hearts[hearts.length - 1];
        const rect = heart.getBoundingClientRect();

        const centerX = rect.left + rect.width / 2;
        const centerY = rect.top + rect.height / 2;

        /* SCREEN SHAKE */
        document.body.classList.add("shake");
        setTimeout(() => document.body.classList.remove("shake"), 280);

        /* SHOCKWAVE */
        const ring = document.createElement("div");
        ring.classList.add("shockwave");
        ring.style.left = centerX - 40 + "px";
        ring.style.top  = centerY - 40 + "px";
        document.body.appendChild(ring);
        setTimeout(() => ring.remove(), 550);

        /* FLASH BURST */
        const flash = document.createElement("div");
        flash.classList.add("flash-burst");
        flash.style.left = centerX - 25 + "px";
        flash.style.top  = centerY - 25 + "px";
        document.body.appendChild(flash);
        setTimeout(() => flash.remove(), 350);

        /* SPARK PARTICLES */
        for (let i = 0; i < 14; i++) {
            const spark = document.createElement("div");
            spark.classList.add("spark");

            const angle = Math.random() * Math.PI * 2;
            const dist = 60 + Math.random() * 40;

            spark.style.left = centerX + "px";
            spark.style.top  = centerY + "px";
            spark.style.setProperty("--dx", `${Math.cos(angle) * dist}px`);
            spark.style.setProperty("--dy", `${Math.sin(angle) * dist}px`);

            document.body.appendChild(spark);
            setTimeout(() => spark.remove(), 600);
        }

        /* Remove heart */
        heart.remove();
    }

    /* Buttons */
    document.querySelectorAll(".circle").forEach(btn => {
        btn.addEventListener("click", () => {
            btn.classList.remove("flash");
            void btn.offsetWidth;
            btn.classList.add("flash");

            if (lives > 0) {
                lives--;
                explodeHeart();
            }
        });
    });

    renderHearts();
</script>

</body>
</html>
